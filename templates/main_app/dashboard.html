{% extends 'base.html' %}
{% block title %}
    Dashboard
{% endblock %}
{% block content %}
    {% for product in products %}
        <h2>{{ product.name }}</h2>
        <p>Rs. {{ product.price }}</p>
        <button onclick="add_to_cart()" value="{{ product.id }}">Add to
            Cart
        </button>
        <h3 id="cart_status" id="cart_status">{{ request.session.cart.total_quantity }}</h3>
    {% endfor %}
    <script>
        function add_to_cart() {
            const product_id = event.target.value;
            axios.get(`add-product/${product_id}`).then(
                function (response) {
                    const data = response.data;
                    console.log(data);
                    document.getElementById('cart_status').innerHTML = data.total_quantity; // update cart status
                }
            )
        }
    </script>
    <script>
        console.log('overridden by Dashboard');
    </script>
{% endblock %}
